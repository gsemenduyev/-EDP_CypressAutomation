pipeline {
    agent {
        docker {
      label 'al2'
      image 'cypress/browsers:node18.12.0-chrome107'
      args '--ipc=host'
    }
    }
     parameters{
        choice(name: 'POJECTS', choices: ['stratasphere', 'arfp'], description: "Choice the Project to run")
    }
    options{
        ansiColor('xterm')
    }
    stages {
        stage('Test') {
            steps {
                sh "npm cache clean --force"
            //    sh "cd E2E/ARFP-Stratasphere"
            //    sh "cd ARFP-Stratasphere"
                sh "cd E2E/ARFP-Stratasphere && npm ci --prefer-offline && npx cypress run --browser chrome --headed --env tags=\"@wip\""
         //       sh "npm install -g allure-commandline"
          //      sh "npm run test-${POJECTS}"
            }
        }
    }

    }